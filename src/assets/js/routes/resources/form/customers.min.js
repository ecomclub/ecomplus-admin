!function(){"use strict";var j=window.lang,z=window.tabId,x=window.Tabs[z],C=x.commit,F=function(){return x.data},a=function(){var a=$("#t"+z+"-info-customer"),n=a.find("#t"+z+"-registry-type").find('input[name="registry_type"]'),e=a.find("#t"+z+"-physical"),t=a.find("#t"+z+"-juridical"),s=a.find("#t"+z+"-inscription-number"),r=a.find("#t"+z+"-birth-date").find("#t"+z+"-birth"),d=$("#t"+z+"-info-personal").find("#t"+z+"-full-name"),i=e.find("#t"+z+"-cpf"),p=t.find("#t"+z+"-cnpj"),o=a.find("#t"+z+"-groupPhones"),l=0,c=$("#t"+z+"-staff-notes").find("#t"+z+"-note"),f=$("#t"+z+"-abstract"),u=f.find("#t"+z+"-personalAbs"),h=f.find("#t"+z+"-statisAbs"),m=function(a){var n=$("<div />",{class:"input-group pb-10",html:[$("<div />",{class:"input-group-prepend",html:[$("<button>",{class:"btn btn-light delete-options",html:[$("<i />",{class:"fa fa-trash"})]})]}),$("<input>",{class:"form-control country-code",type:"tel",name:"phones[]."+l+".country_code","data-is-number":"true"}),$("<input>",{class:"form-control w-120px",type:"tel",name:"phones[]."+l+".number","data-mask":"tel","data-numeric-string":"true"})]});o.append(n),l++,handleInputs(n,x.inputToData),setupInputValues(n,w[k].number,"phones.")};n.change(function(){"p"===this.value?(e.show(),t.hide(),s.hide()):(e.hide(),t.show(),s.show())}),i.change(function(){var a=F(),n=i.val().replace(/(\d{3}).(\d{3}).(\d{3})-(\d{2})/,"$1$2$3$4");console.log(n),a.doc_number=n,C(a,!0)}),p.change(function(){var a=F(),n=p.val().replace(/(\d{2}).(\d{3}).(\d{3})\/(\d{4})-(\d{2})/,"$1$2$3$4$5");console.log(n),a.doc_number=n,C(a,!0)});d.change(function(){var a=F(),n=d.val().split(" "),e=n.length;if(0<e){for(var t=n[0],s=n[e-1],r="",i=1;i<n.length-1;i++)""!==r&&(r+=" "),r+=n[i];a.hasOwnProperty("name")||(a.name={}),a.name.given_name=t,a.name.family_name=s,a.name.middle_name=r,C(a,!0)}else a.name={},C(a,!0)});var _,b=F();b.name&&(_=b.name.middle_name?b.name.given_name+" "+b.name.middle_name+" "+b.name.family_name:b.name.given_name+" "+b.name.family_name,d.val(_));if(b.birth_date){var g=b.birth_date.day,v=b.birth_date.month;if(b.birth_date.day<10&&(g="0"+b.birth_date.day),b.birth_date.month<10&&(v="0"+b.birth_date.month),"pt_br"===j){var y=g+"/"+v+"/"+b.birth_date.year;r.val(y)}else y=v+"/"+g+"/"+b.birth_date.year,r.val(y)}if(b.phones)for(var w=b.phones,k=0;k<w.length;k++)m();b.staff_notes&&c.val(b.staff_notes),r.change(function(){var a=F(),n=r.val().split(/(\d{2})\/(\d{2})\/(\d{4})/).filter(String);if(a.hasOwnProperty("birth_date"))a.birth_date={},C(a,!0);else if(a.birth_date={},"pt_br"===j){var e=parseInt(n[0]),t=parseInt(n[1]),s=parseInt(n[2]);a.birth_date.day=e,a.birth_date.month=t,a.birth_date.year=s,C(a,!0)}else e=parseInt(n[1]),t=parseInt(n[0]),s=parseInt(n[2]),a.birth_date.day=e,a.birth_date.month=t,a.birth_date.year=s,C(a,!0)}),e.find("#t"+z+"-cpf").inputmask("999.999.999-99"),t.find("#t"+z+"-cnpj").inputmask("99.999.999/9999-99"),o.find(".country-code").inputmask("+99"),$("#t"+z+"-add-option").click(function(){m()}),o.find(".delete-options").click(function(){var a=F();if(a.phones)for(var n=0;n<a.phones.length;n++)a.phones[n]&&a.phones.splice(1,n);$(this).closest("button").parent().parent().slideUp(400,function(){$(this).remove()}),C(a,!0)});var I,N=$("#t"+z+"-customer-shipping");if(handleNestedObjects(F,C,N,$("#t"+z+"-add-shipping"),$("#t"+z+"-delete-shipping"),$("#t"+z+"-next-shipping"),"addresses",function(a){var n,e=F(),t=function(a){return!0===a.default};if(e.addresses)for(var s=0;s<e.addresses.length;s++){if(e.addresses[s].default){n=e.addresses.filter(t);break}n=e.addresses[0]}a.zip=Object.assign({zip:"00000000"},n),delete a.zip.default,delete a.zip._id}),$("div[data-link-collapse]").each(function(){var a=$(this),e=a.children("div"),t=a.children("em"),n=function(){var n="";e.find("input").each(function(){var a=$(this).val();("string"==typeof a&&""!==a.trim()||"number"==typeof a)&&(n+=a+", ")}),t.text(n.slice(0,-2))};a.children("a").click(function(){e.slideToggle("slow"),n(),t.slideToggle()}),n()}),c.change(function(){var a=F(),n=c.val();a.hasOwnProperty("staff_notes")?a.staff_notes={}:(a.staff_notes={},a.staff_notes=n,C(a,!0))}),b.gender){if("f"===b.gender)var P='<span class="i18n">       <span data-lang="en_us">Female</span>       <span data-lang="pt_br">Feminino</span>      </span> ';else"m"===b.gender&&(P='<span class="i18n">       <span data-lang="en_us">Male</span>       <span data-lang="pt_br">Masculino</span>      </span> ');"x"===b.gender&&(P='<span class="i18n">       <span data-lang="en_us">Others</span>       <span data-lang="pt_br">Outros</span>      </span> ')}if(u.append('<span class="i18n">       <span data-lang="en_us">Name</span>       <span data-lang="pt_br">Nome</span>      </span>: '+_+'<br><span class="i18n">       <span data-lang="en_us">Birth Date</span>       <span data-lang="pt_br">Data de Nascimento</span>      </span>: '+y+'<br><span class="i18n">       <span data-lang="en_us">Gender</span>       <span data-lang="pt_br">Gênero</span>      </span>: '+(P||"Não configurado")+'<br><span class="i18n">       <span data-lang="en_us">CPF/CNPJ</span>       <span data-lang="pt_br">CPF/CNPJ</span>      </span>: '+("j"===(I=b).registry_type?I.doc_number.replace(/(\d{2})(\d{3})(\d{3})\/(\d{4})(\d{2})/,"$1.$2.$3.$4-$5"):I.doc_number.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"))),h.append('<span class="i18n">       <span data-lang="en_us">Number of orders</span>       <span data-lang="pt_br">Quantidade de pedidos</span>      </span>: '+(b.orders_count||"Nenhum pedido realizado")+'<br><span class="i18n">       <span data-lang="en_us">Amount of money in order: </span>       <span data-lang="pt_br">Valor total de pedidos: </span>      </span>'+(window.ecomUtils.formatMoney(b.orders_total_value,b.currency_id)||"0")+'<br><span class="i18n"> '),b.orders_count)for(var O=0;O<b.orders.length;O++)h.append('<span class="i18n">       <span data-lang="en_us">Order</span>       <span data-lang="pt_br">Pedido</span>      </span>: <a href="/#/resources/orders/'+b.orders[O]._id+'">'+b.orders[O].number+'</a><br><span class="i18n"> ')};x.$form?a():$(document).one("form-"+z,a)}();